<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

    <form method="post" action="/resign/message">
        <p>
            <input type="file" 
            name="uimage"
            id="file"
            placeholder="上传头像"
            onchange="UpFile()"
            />
            <!-- <input type="button" value="提交" onclick="UpFile()"/> -->
        </p>
        <p>
            <input                           
            type='text' 
            name='uname' 
            required
            placeholder='请输入昵称'/>
        </p>
        <p >
            <input
            type='radio' 
            name='usex' 
            value='女' 
            checked/>女
            <input 
            id='man'
            type='radio' 
            name='usex' 
            value='男'/>男
        </p>
        <p >
            <input                             
            type='tel' 
            name='utel' 
            required
            placeholder='请输入手机号'/>
        </p>

        <p >
            <input                            
            type='password' 
            name='pass' 
            required
            placeholder='请确认密码'/>
        </p>
        <button >
            返回
        </button>
        <button type='submit' onclick="UpName()" >提交</button>
    </form>
</body>

<script>
    var imgUrl='';
    function UpFile(){
        var fileObj = document.getElementById('file').files[0];
        var url = 'http://localhost:3001/img/';
        var form = new FormData();
        form.append("file",fileObj);
        fetch(url,{
            method:'POST',
            body:form
        }).then(res=>res.json())
        .then(res=>{
            imgUrl=res;
            
        })
    }

    function UpName(){
        var fileObj = document.getElementById('file').files[0];
        fileObj.name = imgUrl.path
        console.log(imgUrl.path);
        console.log('name',fileObj.name);
    }
</script>
</html>